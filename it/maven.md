# maven 笔记(转自于[极客学院](http://wiki.jikexueyuan.com/project/maven/pom.html))

---

[TOC]

---

## 1.概述

Maven 是一个项目管理和整合工具。Maven 为开发者提供了一套完整的构建生命周期框架。开发团队几乎不用花多少时间就能够自动完成工程的基础构建配置，因为 Maven 使用了一个标准的目录结构和一个默认的构建生命周期。

在有多个开发团队环境的情况下，Maven 能够在很短的时间内使得每项工作都按照标准进行。因为大部分的工程配置操作都非常简单并且可复用，在创建报告、检查、构建和测试自动配置时，Maven 可以让开发者的工作变得更简单。

Maven 能够帮助开发者完成以下工作：

- 构建
- 文档生成
- 报告
- 依赖
- SCMs
- 发布
- 分发
- 邮件列表

总的来说，Maven 简化了工程的构建过程，并对其标准化。它无缝衔接了编译、发布、文档生成、团队合作和其他任务。Maven 提高了重用性，负责了大部分构建相关的任务

### 1.1Maven 的目标

Maven 的主要目的是为开发者提供

- 一个可复用、可维护、更易理解的工程综合模型
- 与这个模型交互的插件或者工具

Maven 工程结构和内容被定义在一个 xml 文件中 － pom.xml，是 Project Object Model (POM) 的简称，此文件是整个 Maven 系统的基础组件。详细内容请参考 [Maven POM](http://wiki.jikexueyuan.com/project/maven/pom.html) 部分。

### 1.2约定优于配置

Maven 使用约定而不是配置，意味着开发者不需要再自己创建构建过程。

开发者不需要再关心每一个配置细节。Maven 为工程提供了合理的默认行为。当创建 Maven 工程时，Maven 会创建默认的工程结构。开发者只需要合理的放置文件，而在 pom.xml 中不再需要定义任何配置。

举例说明，下面的表格展示了工程源码文件、资源文件的默认配置，和其他一些配置。假定 `${basedir}` 表示工程目录：

| 配置项                | 默认值                           |
| ------------------ | ----------------------------- |
| source code        | ${basedir}/src/main/java      |
| resources          | ${basedir}/src/main/resources |
| Tests              | ${basedir}/src/test           |
| Complied byte code | ${basedir}/target             |
| distributable JAR  | ${basedir}/target/classes     |

为了构建工程，Maven 为开发者提供了选项来配置生命周期目标和工程依赖（依赖于 Maven 的插件扩展功能和默认的约定）。大部分的工程管理和构建相关的任务是由 Maven 插件完成的。

## 2. maven 生命周期
![mvn 生命周期](../img/mvn 生命周期.jpg)

maven从项目的三个不同的角度，定义了单套生命周期，三套生命周期是相互独立的，它们之间不会相互影响。

* **默认构建生命周期（Default Lifeclyle）:** 该生命周期表示这项目的构建过程，定义了一个项目的构建要经过的不同的阶段。
* **清理生命周期(Clean Lifecycle): **该生命周期负责清理项目中的多余信息，保持项目资源和代码的整洁性。一般拿来清空directory(即一般的target)目录下的文件。
* **站点管理生命周期(Site Lifecycle) :**向我们创建一个项目时，我们有时候需要提供一个站点，来介绍这个项目的信息，如项目介绍，项目进度状态、项目组成成员，版本控制信息，项目javadoc索引信息等等。站点管理生命周期定义了站点管理过程的各个阶段。


### 2.2默认生命周期

![mvn默认生命周期](../img/mvn默认生命周期.jpg)

### 2.3 默认生命周期与指令之前的关系

![指令与maven的生命周期的关系](../img/指令与maven的生命周期的关系.jpg)

> 使用过maven的读者会经常使用这些maven指令：
> ```java
> 1. mvn compile  //让当前项目经历生命周期中的1-->7 阶段 ：完成编译主源代码编译  
> 2. mvn package  //让当前项目经历生命周期中的1-->17阶段 ：完成打包  
> 3. mvn install  //让当前项目经历生命周期中的1-->22阶段 ：完成包安装到本地仓库  
> 4. mvn deploy   //让当前生命经历生命周期中的1-->23阶段 ：完成包部署到中心库中  
> ```
> 在经历这些生命周期的阶段中，每个阶段会理论上会有相应的处理操作。但是，在实际的项目开发过程中， 并不是所有的生命周期阶段都是必须的。
> 然而，在实际的开发过程中，往往我们的项目的一些生命周期的阶段不需要相应的行为，我们只需要关心其中某些重要的生命周期阶段而已。下面，请看一下日常开发中，我们需要关注的生命周期阶段，即广大开发人员对项目周期阶段处理的约定：
>
> 1).应该将resource资源文件准备好，放到指定的target目录下----process-resources 阶段；
> 2).将java源文件编译成.class文件，然后将class 文件放置到对应的target目录下----compile阶段；
> 3).将test类型的resource移动到指定的 target目录下------process-test-resource阶段；
> 4).将test类型的java 源文件编译成class文件，然后放置到指定的target目录下------test-compile阶段；
> 5).运行test测试用例-------test阶段；
> 6).将compile阶段编译的class文件和resource资源打包成jar包或war包--------package阶段；
> 7).将生成的包安装到本地仓库中------install阶段
> 8).将生成的包部署到远程仓库中-----deploy阶段

​           由上面的约定可以看出，在大多数情况下，大家关心的项目生命周期阶段仅仅是上面的8个而已。

### 2.4 打包类型与生命周期的关系

![mvn_打包类型与生命周期](../img/mvn_打包类型与生命周期.jpg)

**jar 与war **

![mvn_jar和war队员生命周期](../img/mvn_jar和war队员生命周期.jpg)



